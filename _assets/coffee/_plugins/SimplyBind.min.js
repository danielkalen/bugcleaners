(function(){(function(){var g,J,ma,ba,r,ca,S,T,da,na,oa,O,pa,qa,Y,h,U,B,n,K,ea,V,L,W;da=function(a){var c;1<a.length?"radio"===a[0].type||"checkbox"===a[0].type?(c=a,a=[],Object.keys(c).forEach(function(d){if(!isNaN(parseFloat(d)))return a.push(c[d])})):(L("onlyOneDOMElement"),a=a[0]):a=a[0];return a};T=function(a){ea.jQuery&&a.constructor===jQuery&&(a=da(a),a.length&&(a=a[0]));return a};ca=function(){var a;a=document.createEvent("Event");a.initEvent("change",!0,!1);a.fromSimplyBind=!0;return a};
na=function(){return"sb_"+Math.floor(1E12*(1+Math.random())).toString(16)};Y=function(a){a=typeof a;return"string"!==a&&"number"!==a?!1:!0};ma=function(a,c,d){var e;e=r.objects.indexOf(a);return-1===e?(e={},e[c]=d,r.objects.push(a),r.props.push(e)):r.props[e][c]=d};oa=function(a,c){var d;d=r.objects.indexOf(a);return-1!==d&&(d=r.props[d],null!=d[c])?g.boundedObjects[d[c]]:!1};K=function(a,c){return{regEx:new RegExp(B.Start+a+B.End,"g"),lastValue:c||""}};ba=function(a,c,d,e){var g;g=n.objects.indexOf(a);
if(-1===g)return g={},g[c]=K(c,d),n.objects.push(a),n.placeholders.push(g),n.originalValues.push(e);a=n.placeholders[g];return null!=a[c]?a[c].lastValue=d:a[c]=K(c,d)};qa=function(a){a=n.objects.indexOf(a);return n.placeholders[a]};pa=function(a){a=n.objects.indexOf(a);return n.originalValues[a]};V=function(a,c){var d,e;if(!h.silent)throw e=O(),d=S[a],c&&(d+=" ["+c+"]"),e&&(d+="\n\nCall Source:\n"+e),Error(d);};L=function(a,c){var d,e;if(!h.silent)return d=O(),e=W[a],c&&(e+=" ["+c+"]"),d&&(e+="\n\nCall Source:\n"+
d),console.log("SimplyBind: "+e)};O=function(){var a;return null!=(a=Error().stack)?a.split("\n").slice(3,10).map(function(a){return a.replace(/@(.*)\/(.+)$/,function(a,c,g){return"@ "+g})}).join("\n"):void 0};S={invalidParamName:"SimplyBind() and .to() can only accept a string/number representing the name of an object\u2019s property or an already-bound object.",notAnObject:"SimplyBind: .of() can only accept a non-primitive object as its argument.",emptyStringArg:"SimplyBind() and .to() can't accept an empty string for a property name."};
W={attributes:"DOM attributes can't be observed for changes and therefore will not update its dependents upon change",transformFunction:"You can only pass a function to the .tranform and .tranformAll method",onlyOneDOMElement:"You can only pass 1 DOM element to SimplyBind unless it's a collection of radio/checkbox inputs",noNestedDOM:"You can't pass nested props for DOM attributes or Input element values. Will only use the uppermost property.",emptyElList:"You can't bind an empty element list to anything..."};
ea={jQuery:"undefined"!==typeof jQuery&&null!==jQuery,IE9:!window.atob};h={silent:!1,liveProperties:!0,dispatchEvents:!1,updateEvenIfSame:!1,invokeOnBind:!0,overrideInheritedProps:!1,mutateArrayMethods:!0,ignoreCase:!1,placeholderStart:"{{",placeholderEnd:"}}"};U=Object.keys(h);B={Start:"\\{\\{",End:"\\}\\}"};r={objects:[],props:[]};n={objects:[],placeholders:[],originalValues:[]};g=function(a){if(""===a)return V("emptyStringArg");if(!a&&0!==a||!Y(a))if(null==a.constructor||a.constructor!==J)return V("invalidParamName");
return"object"===typeof a?(a.invoke("resetConditionals"),a):new J(a)};J=function(a){var c,d,e,fa,r,v,P,p,q,C,B,w,D,O,x,Z,X,K,y,S,u,z,T,Q,f,A,G,m,k,E,H,ga,ha,U,l,M,ia,W,F,ja,ka,la,N,R,I,ra,t;this.ID=this.type=null;c=this;G=B=t=w=Q=null;p=[];q=[];C=[];f=A=null;N=[];m=l=a;R={};k=null;H=[];E=null;M=v=K=X=Z=z=u=x=!1;Object.defineProperty(this,"value",{configurable:!0,enumerable:!0,get:function(){return w}});Object.defineProperty(this,"origObject",{configurable:!0,enumerable:!0,get:function(){return A||
f}});Object.defineProperty(this,"dependents",{configurable:!0,enumerable:!0,get:function(){var b;b=q.slice().map(function(b){return g.boundedObjects[b].origObject});p.forEach(function(a){return b.push(a)});return b}});W=function(b){return function(){b.ID=na();return g.boundedObjects[b.ID]=b}}(this);la=function(b){return function(){var a;if(!b.type&&(b.type="Object",a=null!=f.nodeName&&f.nodeType))return"value"===m?b.type="Value":"textContent"===m?b.type="Text":"prop"===B?b.type="DomProp":b.type="Attr"}}(this);
ja=function(b){null==b&&(b=D());return ba(b,G,t,Q)};ka=function(b){if(M)return[].slice.call(b.childNodes).forEach(function(b){if(3!==b.nodeType)return ka(b);if(-1!==b.textContent.indexOf(h.placeholderStart+G+h.placeholderEnd))return ba(b,G,t,b.textContent)})};O=function(b,a){return-1!==n.objects.indexOf(b)?fa(b):!1};D=function(){var b;if(!N.length)return f;c.ID||la();if("Value"===c.type||"Attr"===c.type)return f;b=f;N.slice().reverse().forEach(function(a){return b=b[a]});return b};P=function(b){return function(){var a,
aa;if("Value"===b.type||"Text"===b.type)if(a=function(a){if(!a.fromSimplyBind)return b.set(a.target.value)},aa=A?A[0].nodeName.toUpperCase():f.nodeName.toUpperCase(),"INPUT"===aa||"TEXTAREA"===aa||"SELECT"===aa){if("radio"===f.type||"checkbox"===f.type)return A.forEach(function(b){return b.addEventListener("change",a,!1)});f.addEventListener("input",a,!1);return f.addEventListener("change",a,!1)}}}(this);r=function(b){return M?[].slice.call(b.childNodes).forEach(function(b){var a;if(3!==b.nodeType)return r(b);
a=O(b);if(!1!==a)return b.textContent=a}):b.textContent=t};ra=function(b){return function(a){t=a;w=M?fa():a;v&&ia();if("Value"===b.type){if(A)return A.forEach(function(b){if(b.value===a){if(b.checked=!0,h.dispatchEvents)return b.dispatchEvent(ca())}else return b.checked=!1});f.value=w;if(h.dispatchEvents)return f.dispatchEvent(ca())}else if("DomProp"===b.type){if(!K)return f[m]=w}else{if("Attr"===b.type)return f.setAttribute(m,w);if("Text"===b.type)return r(f,a)}}}(this);I=function(b){return function(b,
a){var d,c,e,f;if(q.length)for(e=0,f=q.length;e<f;e++)d=q[e],c=g.boundedObjects[d],a&&-1!==C.indexOf(d)||(d=null!=R[d]?R[d](t,c.value):t,c.set(d,b,!0));if(p.length){d=[];e=0;for(f=p.length;e<f;e++)c=p[e],d.push(c(t));return d}}}(this);fa=function(b){var a,d,c;null==b&&(b=D());ja(b);a=pa(b);c=qa(b);for(d in c)b=c[d],a=a.replace(b.regEx,b.lastValue);return a};T=function(b){return function(){var a,d;if(("Object"===b.type||"DomProp"===b.type)&&h.liveProperties){a=D().hasOwnProperty(m);if(d=h.overrideInheritedProps||
a)Object.defineProperty(D(),m,{get:function(){return w},set:function(a){return b.update(a)}}),h.overrideInheritedProps&&!a&&(K=!0);return ia()}}}(this);ia=function(){if(h.mutateArrayMethods&&Array.isArray(w))return v=!0,["push","pop","shift","unshift","splice"].forEach(function(b){return Object.defineProperty(w,b,{configurable:!0,enumerable:!1,value:function(){var a;a=Array.prototype[b].apply(w,arguments);I(c);return a}})})};d=function(b){return function(a,c){-1===q.indexOf(a)&&q.push(a);if(c){if(-1===
C.indexOf(a))return C.push(a)}else if(-1!==g.boundedObjects[a].getPrivate("dependents").indexOf(b.ID))return g.boundedObjects[a].invoke("addToDependents",[b.ID,!0]),d(a,!0)}}(this);e=function(b){return function(b,a){return R[b]=a}}(this);ga=function(b){return function(a,d){var c;c=q.indexOf(a);-1!==c&&q.splice(c,1);if(d&&(C.forEach(function(a){return g.boundedObjects[a].invoke("removeDependent",[b.ID])}),c=C.indexOf(a),-1!==c))return C.splice(c,1)}}(this);ha=function(b){return p.splice(p.indexOf(b),
1)};U=function(b){return function(){X=Z=u=z=!1;k=E=null;H=[];F();return b}}(this);F=function(b){return function(){delete b.of;delete b.to;delete b.and;delete b.set;delete b.update;delete b.get;delete b.update;delete b.transform;delete b.transformAll;delete b.bothWays;delete b.bindTogether;x&&!z||E||(b.of=y.of);!x||u||z||(b.to=y.to);x&&u&&!z&&!X&&(b.and=y.and);x&&(b.set=b.update=y.set,b.get=b.val=y.get);x&&u&&null!=k&&(X||(b.transformAll=y.transformAll),Z||(b.transform=y.transform));x&&u&&!z&&null!=
k&&!E&&(b.bothWays=b.bindTogether=y.bothWays);if(x&&u&&!z&&(null!=k||E))return b.unBind=y.unBind}}(this);S=function(b){return function(a,c){null==c&&(c=[]);switch(a){case "addToDependents":return d.apply(b,c);case "addToTransforms":return e.apply(b,c);case "removeDependent":return ga.apply(b,c);case "resetConditionals":return U.call(b);case "removeFunction":return ha.call(b,c)}}}(this);a=function(b){return function(b){switch(b){case "dependents":return q;case "dependentFns":return p}}}(this);Object.defineProperty(this,
"invoke",{configurable:!1,enumerable:!1,value:S});Object.defineProperty(this,"getPrivate",{configurable:!1,enumerable:!1,value:a});y={of:function(b){var a,c,e;a=null!=b?"object"===typeof b:!1;c=null!=b?Y(b):!1;if(!a&&!c)return V("notAnObject","SimplyBind('"+l+"').of("+(null===b?"null":void 0===b?"undefined":"...")+")");if(z)c=H.indexOf(k),k=k.of(b),H[c]=k,a&&(z=!1,u=!0,d(k.ID),I(this.ID,!0));else if(a){e=!1;b.constructor===J&&(b=b.origObject);x=!0;if(ea.jQuery&&b.constructor===jQuery&&(e=!0,b=da(b),
!b))return x=!1,L("emptyElList","SimplyBind('"+l+"').of( $(...) )");f=b;a=D()[m];c=b.constructor.name;if("NodeList"===c||"HTMLCollection"===c||e&&"Array"===c){if(0===b.length)return f=null,x=!1,L("emptyElList","SimplyBind('"+l+"').of(...)");f=null;A=[].slice.call(b);A.forEach(function(b){if(b.checked)return f=b});f||(f=A[0]);b=f;a=f.value}if(c=null!=f.nodeName&&f.nodeType)"textContent"===m?(ka(f),a=f.textContent):"value"!==m&&(a=null===B?b.getAttribute(m):b[m]),N.length&&(L("noNestedDOM"),m=l=b=N[N.length-
1]);b=oa(D(),l);if("function"===typeof b.invoke&&b.invoke("resetConditionals"))return b;"undefined"===typeof a&&(a=D()[m]=null);w=Q=a;M?(t=h.placeholderStart+G+h.placeholderEnd,-1===Q.indexOf(t)?(M=!1,t=Q):ja()):t=Q;W();ma(D(),l,this.ID);la();T();P()}else N.push(b);F();return this},to:function(b){if(null==b)return this;if(b.constructor===J)u=!0,k=b,H.push(k),d(k.ID),I(this.ID,!0);else if(Y(b))z=!0,k=new J(b),H.push(k);else if("function"===typeof b)u=!0,-1===p.indexOf(b)&&p.push(b),E=b,h.invokeOnBind&&
I(this.ID,!0);else return V("invalidParamName","SimplyBind('"+l+"').of(...).to("+typeof b+")");F();u&&this.update(null,this.ID);return this},and:function(b){return y.to.bind(this)(b)},set:function(b,a,c){null==c&&(c=!1);a===this.ID||b===t&&!h.updateEvenIfSame||(null==a&&(a=this.ID),"undefined"!==typeof b&&ra(b,a),I(a,c));return this},get:function(){return t},transform:function(b){"function"===typeof b?(Z=!0,e(k.ID,b),-1!==C.indexOf(k.ID)&&k.invoke("addToTransforms",[this.ID,b]),I(this.ID,!0)):L("transformFunction",
"SimplyBind('"+l+"').of(...).to(...).transform("+typeof b+")");F();return this},transformAll:function(b){var a,c,d;if("function"===typeof b){X=!0;a=0;for(c=H.length;a<c;a++)d=H[a],e(d.ID,b),-1!==C.indexOf(d.ID)&&d.invoke("addToTransforms",[this.ID,b]);I(this.ID,!0)}else L("transformFunction","SimplyBind('"+l+"').of(...).to(...).and(...).transformAll("+typeof b+")");F();return this},bothWays:function(){null!=R[k.ID]?g(k).to(this).transform(R[k.ID]):g(k).to(this);d(k.ID,!0);F();return this},unBind:function(a){E?
(ha(E),u=!1,E=null):(ga(k.ID,a),u=!1,k=null);F();return this}};"number"===typeof l&&(m=l=l.toString());h.ignoreCase&&(m=l=l.toLowerCase());-1!==l.indexOf(":")&&(a=l.split(":"),B=a[0],l=a[1],m=a[1]);-1!==l.indexOf(".")&&(M=!0,a=l.split("."),m=a[0],G=a[1],2<a.length&&a.slice(2).forEach(function(a){return G+="."+a}));F();return this};Object.defineProperty(g,"options",{configurable:!1,enumerable:!1,get:function(){return h}});g.setOption=function(a,c){if(-1!==U.indexOf(a))return-1!==a.indexOf("placeholder")&&
(a.indexOf("Start"),B[a.slice(11)]=c.replace(/(.)/g,"\\$1")),h[a]=c};g.setOptions=function(a){var c;c=Object.keys(a);if(c.length)return c.forEach(function(c){return g.setOption(c,a[c])})};g.unBindAll=function(a,c,d){var e,h,n,v,P,p,q;d||g.unBindAllFunctions(a);if(a&&"object"===typeof a&&(a=T(a),d=null!=a.nodeName&&a.nodeType,e=r.objects.indexOf(a),-1!==e)){P=r.props[e];q=[];for(p in P)v=P[p],n=d&&"value"!==p?a.getAttribute(p):a[p],h=g.boundedObjects[v],e=h.getPrivate("dependents"),e.slice().forEach(function(a){return h.invoke("removeDependent",
[a,c])}),c?(delete g.boundedObjects[v],"Value"!==h.type?q.push(Object.defineProperty(a,p,{value:n})):q.push(void 0)):q.push(void 0);return q}};g.unBindAllFunctions=function(a,c){var d,e,h,n,v;if(a&&"object"===typeof a&&(e=r.objects.indexOf(a),-1!==e)){d=function(a){var c;if(a)return c=g.boundedObjects[a],a=c.getPrivate("dependentFns"),a.slice().forEach(function(a){return c.invoke("removeFunction",a)})};h=r.props[e];if(c)return d(h[c]);v=[];for(n in h)e=h[n],v.push(d(e));return v}};g.SimplyBoundedConstructor=
J;g.boundedObjects={};return window.SimplyBind=g})()}).call(this);
