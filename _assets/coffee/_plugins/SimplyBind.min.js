(function(){(function(){var g,z,ma,na,ba,n,oa,S,T,U,ca,pa,qa,ra,P,sa,ta,X,k,ua,u,q,J,da,V,Q,va;ca=function(a){var c;1<a.length?"radio"===a[0].type||"checkbox"===a[0].type?(c=a,a=[],Object.keys(c).forEach(function(d){if(!isNaN(parseFloat(d)))return a.push(c[d])})):(Q("onlyOneDOMElement"),a=a[0]):a=a[0];return a};U=function(a){da.jQuery&&a.constructor===jQuery&&(a=ca(a),a.length&&(a=a[0]));return a};oa=function(){var a;a=document.createEvent("Event");a.initEvent("change",!0,!1);a.fromSimplyBind=!0;
return a};pa=function(){return"sb_"+Math.floor(1E12*(1+Math.random())).toString(16)};X=function(a){a=typeof a;return"string"!==a&&"number"!==a?!1:!0};ma=function(a,c,d){var f;f=n.objects.indexOf(a);return-1===f?(f={},f[c]=d,n.objects.push(a),n.props.push(f)):n.props[f][c]=d};qa=function(a,c){var d;d=n.objects.indexOf(a);return-1!==d&&(d=n.props[d],null!=d[c])?g.boundedObjects[d[c]]:!1};na=function(a,c){n.fns.push(a);return n.fnIDs.push(c)};ra=function(a){a=n.fns.indexOf(a);return-1!==a?g.boundedObjects[n.fnIDs[a]]:
!1};J=function(a,c){return{regEx:new RegExp(u.Start+a+u.End,"g"),lastValue:c||""}};ba=function(a,c,d,f){var g;g=q.objects.indexOf(a);if(-1===g)return g={},g[c]=J(c,d),q.objects.push(a),q.placeholders.push(g),q.originalValues.push(f);a=q.placeholders[g];return null!=a[c]?a[c].lastValue=d:a[c]=J(c,d)};ta=function(a){a=q.objects.indexOf(a);return q.placeholders[a]};sa=function(a){a=q.objects.indexOf(a);return q.originalValues[a]};V=function(a,c){var d,f;if(!k.silent)throw f=P(),d=T[a],c&&(d+=" ["+c+
"]"),Error(d+("\n\nCall Source:\n"+f));};Q=function(a,c){var d,f;if(!k.silent)return d=P(),f=va[a],c&&(f+=" ["+c+"]"),console.log("SimplyBind: "+(f+("\n\nCall Source:\n"+d)))};P=function(){return Error().stack.split("\n").slice(3,10).map(function(a){return a.replace(S,function(a,d,f){return"@ "+f})}).join("\n")};S=/[@(?:\wat\s)](.*)\/(.+)$/;T={invalidParamName:"SimplyBind() and .to() can only accept a string/number representing the name of an object\u2019s property, a function, or an already-bound object.",
notAnObject:"SimplyBind: .of() can only accept a non-primitive object as its argument.",emptyStringArg:"SimplyBind() and .to() can't accept an empty string for a property name."};va={attributes:"DOM attributes can't be observed for changes and therefore will not update its dependents upon change",transformFunction:"You can only pass a function to the .tranform and .tranformAll method",onlyOneDOMElement:"You can only pass 1 DOM element to SimplyBind unless it's a collection of radio/checkbox inputs",
noNestedDOM:"You can't pass nested props for DOM attributes or Input element values. Will only use the uppermost property.",emptyElList:"You can't bind an empty element list to anything..."};da={jQuery:"undefined"!==typeof jQuery&&null!==jQuery,IE9:!window.atob};k={silent:!1,liveProperties:!0,dispatchEvents:!1,updateEvenIfSame:!1,invokeOnBind:!0,overrideInheritedProps:!1,mutateArrayMethods:!0,ignoreCase:!1,placeholderStart:"{{",placeholderEnd:"}}"};ua=Object.keys(k);u={Start:"\\{\\{",End:"\\}\\}"};
n={objects:[],props:[],fns:[],fnIDs:[]};q={objects:[],placeholders:[],originalValues:[]};g=function(a){if(""===a)return V("emptyStringArg");if(!a&&0!==a||!X(a)&&"function"!==typeof a)if(null==a.constructor||a.constructor!==z)return V("invalidParamName");return"object"===typeof a?(a.invoke("resetConditionals"),a):new z(a)};z=function(a,c){var d,f,n,ea,fa,wa,A,G,B,H,u,x,r,C,P,y,Y,W,J,t,v,D,S,K,e,E,I,Z,ga,l,h,L,ha,T,m,M,ia,ja,F,ka,la,aa,N,R,O,U,p;this.ID=this.type=null;d=this;I=u=p=r=K=null;B=[];H=[];
e=E=null;N=[];l=m=a;R={};h=null;L=[];M=A=J=W=Y=D=v=y=!1;Z=null;Object.defineProperty(this,"value",{get:function(){return r}});Object.defineProperty(this,"original",{get:function(){return E||e}});Object.defineProperty(this,"dependents",{get:function(){return B.slice().map(function(b){return g.boundedObjects[b].original})}});ja=function(b){return function(){b.ID=pa();return g.boundedObjects[b.ID]=b}}(this);aa=function(b){return function(){var a;if(!b.type&&(b.type="function"===typeof e&&"function"===
typeof l?"Func":"Object",a=null!=e.nodeName&&e.nodeType))return"value"===l?b.type="Value":"textContent"===l?b.type="Text":"prop"===u?b.type="DomProp":b.type="Attr"}}(this);ka=function(b){null==b&&(b=C());return ba(b,I,p,K)};la=function(b){if(M)return[].slice.call(b.childNodes).forEach(function(b){if(3!==b.nodeType)return la(b);if(-1!==b.textContent.indexOf(k.placeholderStart+I+k.placeholderEnd))return ba(b,I,p,b.textContent)})};P=function(b,a){return-1!==q.objects.indexOf(b)?ea(b):!1};C=function(){var b;
if(!N.length)return e;d.ID||aa();if("Value"===d.type||"Attr"===d.type)return e;b=e;N.slice().reverse().forEach(function(a){return b=b[a]});return b};G=function(b){return function(){var a,w;if("Value"===b.type||"Text"===b.type)if(a=function(a){if(!a.fromSimplyBind)return b.set(a.target.value)},w=E?E[0].nodeName.toUpperCase():e.nodeName.toUpperCase(),"INPUT"===w||"TEXTAREA"===w||"SELECT"===w){if("radio"===e.type||"checkbox"===e.type)return E.forEach(function(b){return b.addEventListener("change",a,
!1)});e.addEventListener("input",a,!1);return e.addEventListener("change",a,!1)}}}(this);fa=function(b){return M?[].slice.call(b.childNodes).forEach(function(b){var a;if(3!==b.nodeType)return fa(b);a=P(b);if(!1!==a)return b.textContent=a}):b.textContent=p};U=function(b){return function(a){p=a;r=M?ea():a;A&&ia();if("Func"===b.type)return r=p=e(a);if("Value"===b.type){if(E)return E.forEach(function(b){return b.value===a?b.checked=!0:b.checked=!1});e.value=r;if(k.dispatchEvents)return e.dispatchEvent(oa())}else if("DomProp"===
b.type){if(!J)return e[l]=r}else{if("Attr"===b.type)return e.setAttribute(l,r);if("Text"===b.type)return fa(e,a)}}}(this);O=function(b,a){var w,c,d,e,f;if(B.length){f=[];d=0;for(e=B.length;d<e;d++)w=B[d],c=g.boundedObjects[w],a&&-1!==H.indexOf(w)?f.push(void 0):(w=wa(c),f.push(c.set(w,b,!0)));return f}};ea=function(b){var a,w,d;null==b&&(b=C());ka(b);a=sa(b);d=ta(b);for(w in d)b=d[w],a=a.replace(b.regEx,b.lastValue);return a};wa=function(b){return null!=R[b.ID]?R[b.ID](p,b.value):p};S=function(b){return function(){var a,
d;if(("Object"===b.type||"DomProp"===b.type)&&k.liveProperties){a=C().propertyIsEnumerable(l);if(d=k.overrideInheritedProps||a)Object.defineProperty(C(),l,{get:function(){return r},set:function(a){return b.update(a)}}),k.overrideInheritedProps&&!a&&(J=!0);return ia()}}}(this);ia=function(){if(k.mutateArrayMethods&&Array.isArray(r))return A=!0,["push","pop","shift","unshift","splice"].forEach(function(b){return Object.defineProperty(r,b,{configurable:!0,enumerable:!1,value:function(){var a;a=Array.prototype[b].apply(r,
arguments);O(d);return a}})})};ga=function(b){return function(a,d,c){var f,e;if("function"===typeof a){c?W=!0:Y=!0;c=0;for(f=d.length;c<f;c++)e=d[c],n(e.ID,a),-1!==H.indexOf(e.ID)&&e.invoke("addToTransforms",[b.ID,a]);O(b.ID,!0)}else Q("transformFunction","SimplyBind('"+m+"').of(...).to(...).and(...)."+(c?"transformAll":"transform")+"("+typeof a+")");F();return b}}(this);f=function(b){return function(a,d){-1===B.indexOf(a)&&B.push(a);if(d){if(-1===H.indexOf(a))return H.push(a)}else if(-1!==g.boundedObjects[a].getPrivate("dependents").indexOf(b.ID))return g.boundedObjects[a].invoke("addToDependents",
[b.ID,!0]),f(a,!0)}}(this);n=function(b,a){return R[b]=a};ha=function(b){return function(a,d){var c;c=B.indexOf(a);-1!==c&&B.splice(c,1);if(d&&(H.forEach(function(a){return g.boundedObjects[a].invoke("removeDependent",[b.ID])}),c=H.indexOf(a),-1!==c))return H.splice(c,1)}}(this);T=function(){W=Y=v=D=!1;h=null;L=[];F();return d};F=function(b){return function(){"of to and set update get update transform transformAll bothWays bindTogether chainTo pollEvery stopPolling".split(" ").forEach(function(a){return delete b[a]});
if(!y||D)b.of=t.of;!y||v||D||(b.to=t.to);y&&v&&!D&&!W&&(b.and=t.and);y&&(b.set=b.update=t.set,b.get=b.val=t.get);y&&v&&null!=h&&(W||(b.transformAll=t.transformAll),Y||(b.transform=t.transform));y&&v&&!D&&null!=h&&"Func"!==b.type&&"Func"!==h.type&&(b.bothWays=b.bindTogether=t.bothWays);y&&v&&!D&&h&&(b.unBind=t.unBind);null!=h&&(b.chainTo=t.chainTo);v&&(b.pollEvery=t.pollEvery);if(null!==Z)return b.stopPolling=t.stopPolling}}(this);x=function(b){return function(a,c){null==c&&(c=[]);switch(a){case "addToDependents":return f.apply(b,
c);case "addToTransforms":return n.apply(b,c);case "removeDependent":return ha.apply(b,c);case "resetConditionals":return T.call(b)}}}(this);Object.defineProperty(this,"invoke",{value:x});Object.defineProperty(this,"getPrivate",{value:function(b){switch(b){case "dependents":return B}}});t={of:function(b){var a,c,d;a=null!=b?"object"===typeof b||"function"===typeof b:!1;c=null!=b?X(b):!1;if(!a&&!c)return V("notAnObject","SimplyBind('"+m+"').of("+(null===b?"null":void 0===b?"undefined":"...")+")");
if(D)c=L.indexOf(h),h=h.of(b),L[c]=h,a&&(D=!1,v=!0,f(h.ID),O(this.ID,!0));else if(a){d=!1;b.constructor===z&&(b=b.original);y=!0;if(da.jQuery&&b.constructor===jQuery&&(d=!0,b=ca(b),!b))return y=!1,Q("emptyElList","SimplyBind('"+m+"').of( $(...) )");e=b;a=C()[l];c=b.constructor.name;if(b.constructor===NodeList||"HTMLCollection"===c||d&&"Array"===c){if(0===b.length)return e=null,y=!1,Q("emptyElList","SimplyBind('"+m+"').of(...)");e=null;E=[].slice.call(b);E.forEach(function(a){if(a.checked)return e=
a});e||(e=E[0]);b=e;a=e.value}if(c=null!=e.nodeName&&e.nodeType)"textContent"===l?(la(e),a=e.textContent):"value"!==l&&(a=null===u?b.getAttribute(l):b[l]),N.length&&(Q("noNestedDOM"),l=m=b=N[N.length-1]);b=qa(C(),m);if("function"===typeof b.invoke&&b.invoke("resetConditionals"))return b;"undefined"===typeof a&&(a=C()[l]=null);r=K=a;M?(p=k.placeholderStart+I+k.placeholderEnd,-1===K.indexOf(p)?(M=!1,p=K):ka()):p=K;ja();ma(C(),m,this.ID);aa();S();G()}else N.push(b);F();return this},to:function(a){var c;
if(null==a)return this;c="function"===typeof a;if(a.constructor===z)v=!0,h=a,L.push(h),f(h.ID),O(this.ID,!0);else if(X(a)||c)c||(D=!0),h=new z(a,c),L.push(h),c&&(v=!0,f(h.ID),k.invokeOnBind&&O(this.ID,!0));else return V("invalidParamName","SimplyBind('"+m+"').of(...).to("+typeof a+")");F();v&&!c&&this.update(null,this.ID);return this},and:function(a){return t.to.bind(this)(a)},set:function(a,c,d){null==d&&(d=!1);c===this.ID||a===p&&!k.updateEvenIfSame||(null==c&&(c=this.ID),"undefined"!==typeof a&&
U(a,c),O(c,d));return this},get:function(){return p},transform:function(a){return ga(a,[h])},transformAll:function(a){return ga(a,L,!0)},bothWays:function(){null!=R[h.ID]?g(h).to(this).transform(R[h.ID]):g(h).to(this);f(h.ID,!0);F();return this},unBind:function(a){ha(h.ID,a);v=!1;h=null;F();return this},chainTo:function(a){return g(h).to(a)},pollEvery:function(a){Z=setInterval(function(a){return function(){var b;b="Func"===a.type?e():C()[l];if(b!==r)return a.update(b)}}(this),a);F();return this},
stopPolling:function(){return clearInterval(Z)}};if("function"===typeof a){if(x=ra(a))return x.invoke("resetConditionals");y=!0;e=a;c||(K=r=p=a());ja();aa();na(a,this.ID)}else"number"===typeof m&&(l=m=m.toString()),k.ignoreCase&&(l=m=m.toLowerCase()),-1!==m.indexOf(":")&&(x=m.split(":"),u=x[0],m=l=x[1]),-1!==m.indexOf(".")&&(M=!0,x=m.split("."),l=x[0],I=x[1],2<x.length&&x.slice(2).forEach(function(a){return I+="."+a}));F();return this};Object.defineProperty(g,"options",{configurable:!1,enumerable:!1,
get:function(){return k}});g.setOption=function(a,c){if(-1!==ua.indexOf(a))return-1!==a.indexOf("placeholder")&&(a.indexOf("Start"),u[a.slice(11)]=c.replace(/(.)/g,"\\$1")),k[a]=c};g.setOptions=function(a){var c;c=Object.keys(a);if(c.length)return c.forEach(function(c){return g.setOption(c,a[c])})};g.unBindAll=function(a,c,d){var f,k,q,u,z,A,G;if(a&&("object"===typeof a||"function"===typeof a)&&(a=U(a),d=null!=a.nodeName&&a.nodeType,f=n.objects.indexOf(a),-1!==f)){z=n.props[f];G=[];for(A in z)u=z[A],
q=d&&"value"!==A?a.getAttribute(A):a[A],k=g.boundedObjects[u],f=k.getPrivate("dependents"),f.slice().forEach(function(a){return k.invoke("removeDependent",[a,c])}),c?(delete g.boundedObjects[u],"Value"!==k.type?G.push(Object.defineProperty(a,A,{value:q})):G.push(void 0)):G.push(void 0);return G}};g.SimplyBoundedConstructor=z;g.boundedObjects={};return window.SimplyBind=g})()}).call(this);
