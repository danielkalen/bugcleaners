// Generated by CoffeeScript 1.10.0

/* ==========================================================================
	 Enable Variation Rotation
	==========================================================================
 */

(function() {
  $('.manage-content').on('click', '.variations_enable', function() {
    var $toggle, dataToSend, enable, isOn, slug;
    $toggle = $(this);
    isOn = $toggle.data('on');
    enable = isOn ? false : true;
    slug = $toggle.parents('ul').attr('id');
    dataToSend = {
      'query': {
        'slug': slug
      },
      'data': {
        'variations_enabled': enable
      }
    };
    $.post('/api/update/pages', dataToSend, function(response) {
      if (response.success) {
        return log('Variation Rotation updated successfuly.');
      }
    }, 'JSON');
    $toggle.toggleClass('on');
    if (isOn) {
      return $toggle.data('on', '');
    } else {
      return $toggle.data('on', 'on');
    }
  });

  $('.manage-content').on('change', '.current_variation', function() {
    var $field, current, dataToSend, slug;
    $field = $(this);
    current = $field.val() - 1;
    slug = $field.parents('ul').attr('id');
    dataToSend = {
      'query': {
        'slug': slug
      },
      'data': {
        'current_variation': current
      }
    };
    return $.post('/api/update/pages', dataToSend, function(response) {
      if (response.success) {
        return log('Variation Rotation updated successfuly.');
      }
    }, 'JSON');
  });

}).call(this);
